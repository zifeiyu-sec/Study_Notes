# åŸºç¡€å­¦ä¹ 

## HashMap

`HashMap` æ˜¯ Java é›†åˆæ¡†æ¶ä¸­çš„ä¸€ä¸ª **å“ˆå¸Œè¡¨ï¼ˆæ•£åˆ—è¡¨ï¼‰å®ç°**ï¼Œç”¨äºå­˜å‚¨**é”®å€¼å¯¹ï¼ˆkey-valueï¼‰**ã€‚

å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š

- **é”®å”¯ä¸€**ï¼Œå€¼å¯ä»¥é‡å¤
- æŸ¥è¯¢ã€æ’å…¥ã€åˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦é€šå¸¸æ˜¯ **O(1)**
- å…è®¸å­˜å‚¨ `null` é”®å’Œ `null` å€¼ï¼ˆé”®æœ€å¤šä¸€ä¸ªä¸º nullï¼‰

åŸºç¡€ç”¨æ³•ï¼š

```java
import java.util.HashMap;

public class Demo {
    public static void main(String[] args) {
        HashMap<String, Integer> map = new HashMap<>();

        // æ·»åŠ å…ƒç´ 
        map.put("apple", 3);
        map.put("banana", 5);
        map.put("orange", 2);

        // è·å–å…ƒç´ 
        int appleCount = map.get("apple"); // è¿”å› 3
        System.out.println("Apple count: " + appleCount);

        // åˆ¤æ–­é”®æˆ–å€¼æ˜¯å¦å­˜åœ¨
        System.out.println(map.containsKey("banana")); // true
        System.out.println(map.containsValue(5)); // true

        // éå†
        for (String key : map.keySet()) {
            System.out.println(key + " => " + map.get(key));
        }

        // åˆ é™¤å…ƒç´ 
        map.remove("banana");

        // å¤§å°
        System.out.println("Size: " + map.size());
    }
}

```

è¿è¡Œç»“æœï¼š

![image-20250809004714552](./images/åŸºç¡€å­¦ä¹ 2/image-20250809004714552.png)

### âš ï¸ æ³¨æ„äº‹é¡¹

| é¡¹ç›®                                | è¯´æ˜                                             |
| ----------------------------------- | ------------------------------------------------ |
| ä¸ä¿è¯é¡ºåº                          | æ’å…¥é¡ºåºä¸ä¼šè¢«ä¿ç•™ï¼Œå¦‚éœ€é¡ºåºï¼Œç”¨ `LinkedHashMap` |
| çº¿ç¨‹ä¸å®‰å…¨                          | å¤šçº¿ç¨‹åœºæ™¯ä¸‹ä½¿ç”¨ `ConcurrentHashMap` æ›¿ä»£        |
| é”®éœ€å®ç° `hashCode()` ä¸ `equals()` | å¦åˆ™å¯èƒ½æ— æ³•æ­£ç¡®å®šä½å…ƒç´                          |
| null                                | é”®æœ€å¤šå…è®¸ä¸€ä¸ªä¸º `null`ï¼Œå€¼å¯ä»¥æœ‰å¤šä¸ªä¸º `null`   |



## StringBuilder

`StringBuilder` æ˜¯ Java ä¸­ç”¨äº**æ„å»ºå¯å˜å­—ç¬¦ä¸²**çš„ç±»ï¼Œä½äº `java.lang` åŒ…ä¸­ã€‚å®ƒåœ¨éœ€è¦é¢‘ç¹ä¿®æ”¹å­—ç¬¦ä¸²å†…å®¹ï¼ˆå¦‚æ‹¼æ¥ã€æ’å…¥ã€åˆ é™¤ç­‰ï¼‰çš„åœºæ™¯ä¸‹ï¼Œæ€§èƒ½è¿œä¼˜äº `String`ã€‚

### ğŸ†š ä¸ `String` å’Œ `StringBuffer` çš„å¯¹æ¯”

| ç±»å            | å¯å˜æ€§ | çº¿ç¨‹å®‰å…¨               | æ€§èƒ½                           |
| --------------- | ------ | ---------------------- | ------------------------------ |
| `String`        | ä¸å¯å˜ | çº¿ç¨‹å®‰å…¨ï¼ˆå› ä¸ºä¸å¯å˜ï¼‰ | æœ€æ…¢ï¼ˆæ¯æ¬¡æ“ä½œéƒ½ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼‰ |
| `StringBuilder` | å¯å˜   | **ä¸çº¿ç¨‹å®‰å…¨**         | æœ€å¿«ï¼Œé€‚åˆå•çº¿ç¨‹               |
| `StringBuffer`  | å¯å˜   | **çº¿ç¨‹å®‰å…¨**           | è¾ƒæ…¢ï¼Œé€‚åˆå¤šçº¿ç¨‹               |

```java
package sec.basec.yufa.String_Builder;

public class Demo {
    public static void main(String[] args) {
        StringBuilder sb = new StringBuilder();

        // æ·»åŠ å†…å®¹ï¼ˆæ‹¼æ¥ï¼‰
        sb.append("Hello");
        sb.append(" ");
        sb.append("World!");
        System.out.println("æ‹¼æ¥:"+sb);

        // æ’å…¥
        sb.insert(6, "Java ");
        System.out.println("æ’å…¥:"+sb);

        // åˆ é™¤
        sb.delete(11, 17); // åˆ é™¤ "World"
        System.out.println("åˆ é™¤ï¼š"+sb);

        // æ›¿æ¢
        sb.replace(6, 10, "StringBuilder");
        System.out.println("æ›¿æ¢ï¼š"+sb);

        // åè½¬
        sb.reverse();
        System.out.println("åè½¬ï¼š"+sb);

        // è½¬æ¢ä¸º String
        String result = sb.toString();
        System.out.println("è½¬æ¢ï¼š"+sb);

//        System.out.println(result);  // è¾“å‡ºåè½¬åçš„å­—ç¬¦ä¸²
    }
}
```

![image-20250809005801446](./images/åŸºç¡€å­¦ä¹ 2/image-20250809005801446.png)

## StringBuffer

`StringBuffer` æ˜¯ Java ä¸­ç”¨äºæ“ä½œ **å¯å˜å­—ç¬¦ä¸²** çš„ç±»ï¼Œå®ƒçš„åŠŸèƒ½å’Œ `StringBuilder` åŸºæœ¬ç›¸åŒï¼Œä½†**çº¿ç¨‹å®‰å…¨**ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

| ç‰¹ç‚¹     | æè¿°                                                         |
| -------- | ------------------------------------------------------------ |
| å¯å˜æ€§   | å­—ç¬¦ä¸²å†…å®¹å¯ä»¥ä¿®æ”¹ï¼Œä¸åƒ `String` ä¸€æ ·æ¯æ¬¡ç”Ÿæˆæ–°å¯¹è±¡         |
| çº¿ç¨‹å®‰å…¨ | æ‰€æœ‰æ–¹æ³•åŸºæœ¬éƒ½ä½¿ç”¨äº† `synchronized` ä¿®é¥°ï¼Œ**é€‚åˆå¤šçº¿ç¨‹ç¯å¢ƒ** |
| æ•ˆç‡ç•¥ä½ | å› ä¸ºåŠ äº†çº¿ç¨‹é”ï¼Œåœ¨å•çº¿ç¨‹ä¸‹æ€§èƒ½ä¸å¦‚ `StringBuilder`           |

```java
public class Demo {
    public static void main(String[] args) {
        StringBuffer sb = new StringBuffer("Hello");

        // è¿½åŠ å­—ç¬¦ä¸²
        sb.append(" World");

        // æ’å…¥å†…å®¹
        sb.insert(6, "Java ");

        // æ›¿æ¢éƒ¨åˆ†å†…å®¹
        sb.replace(6, 10, "StringBuffer");

        // åˆ é™¤å†…å®¹
        sb.delete(0, 6);

        // åè½¬å­—ç¬¦ä¸²
        sb.reverse();

        // è¾“å‡ºç»“æœ
        System.out.println(sb.toString());  // è¾“å‡ºåè½¬åçš„å­—ç¬¦ä¸²
    }
}
```

## IOæµ

> Java ä¸­çš„ IOï¼ˆInput/Outputï¼‰æµæ˜¯ç”¨æ¥å¤„ç†**æ•°æ®çš„è¾“å…¥ä¸è¾“å‡º**çš„æœºåˆ¶ï¼Œæ˜¯ Java ç¼–ç¨‹ä¸­éå¸¸æ ¸å¿ƒçš„éƒ¨åˆ†ä¹‹ä¸€ï¼Œå¸¸ç”¨äº**è¯»å†™æ–‡ä»¶ã€ç½‘ç»œé€šä¿¡ã€æ§åˆ¶å°äº¤äº’**ç­‰ã€‚
>
> ------
>
> ## ğŸ§© ä¸€ã€Java IO æµçš„åˆ†ç±»
>
> Java IO æµåˆ†ä¸ºä»¥ä¸‹å››å¤§ç±»ï¼š
>
> | ç±»å‹       | å­—èŠ‚æµï¼ˆ8ä½ï¼‰  | å­—ç¬¦æµï¼ˆ16ä½ï¼‰ |
> | ---------- | -------------- | -------------- |
> | è¾“å…¥ï¼ˆè¯»ï¼‰ | `InputStream`  | `Reader`       |
> | è¾“å‡ºï¼ˆå†™ï¼‰ | `OutputStream` | `Writer`       |
>
> 
>
> ### âœ… é€‰æ‹©è§„åˆ™ï¼š
>
> - å¤„ç†**äºŒè¿›åˆ¶æ•°æ®**ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€æ–‡ä»¶ï¼‰ï¼šç”¨ **å­—èŠ‚æµ**
> - å¤„ç†**æ–‡æœ¬æ•°æ®**ï¼šç”¨ **å­—ç¬¦æµ**
>
> ------
>
> ## ğŸ“¦ äºŒã€å¸¸ç”¨ç±»ï¼ˆç»§æ‰¿ä½“ç³»ï¼‰
>
> ### 1. å­—èŠ‚æµ
>
> | ç±»å                   | æè¿°                           |
> | ---------------------- | ------------------------------ |
> | `FileInputStream`      | è¯»å–æ–‡ä»¶çš„å­—èŠ‚æµ               |
> | `FileOutputStream`     | å†™å…¥æ–‡ä»¶çš„å­—èŠ‚æµ               |
> | `BufferedInputStream`  | å¸¦ç¼“å†²çš„å­—èŠ‚è¾“å…¥æµï¼ˆæé«˜æ•ˆç‡ï¼‰ |
> | `BufferedOutputStream` | å¸¦ç¼“å†²çš„å­—èŠ‚è¾“å‡ºæµ             |
> | `ObjectInputStream`    | ç”¨äºååºåˆ—åŒ–å¯¹è±¡               |
> | `ObjectOutputStream`   | ç”¨äºåºåˆ—åŒ–å¯¹è±¡                 |
>
> 
>
> ### 2. å­—ç¬¦æµ
>
> | ç±»å                 | æè¿°                                    |
> | -------------------- | --------------------------------------- |
> | `FileReader`         | è¯»å–æ–‡ä»¶çš„å­—ç¬¦æµ                        |
> | `FileWriter`         | å†™å…¥æ–‡ä»¶çš„å­—ç¬¦æµ                        |
> | `BufferedReader`     | å¸¦ç¼“å†²çš„å­—ç¬¦è¾“å…¥æµï¼ˆæ”¯æŒ `readLine()`ï¼‰ |
> | `BufferedWriter`     | å¸¦ç¼“å†²çš„å­—ç¬¦è¾“å‡ºæµ                      |
> | `InputStreamReader`  | å­—èŠ‚æµ â†’ å­—ç¬¦æµçš„æ¡¥æ¢                   |
> | `OutputStreamWriter` | å­—ç¬¦æµ â†’ å­—èŠ‚æµçš„æ¡¥æ¢                   |
>
> 
>
> ------
>
> ## ğŸ›  ä¸‰ã€åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹
>
> ### ç¤ºä¾‹1ï¼šä½¿ç”¨å­—ç¬¦æµè¯»å–æ–‡ä»¶å†…å®¹ï¼ˆæ¨èæ–¹å¼ï¼‰
>
> ```
> javaå¤åˆ¶ç¼–è¾‘import java.io.*;
> 
> public class ReadFileDemo {
>     public static void main(String[] args) throws IOException {
>         try (BufferedReader reader = new BufferedReader(new FileReader("example.txt"))) {
>             String line;
>             while ((line = reader.readLine()) != null) {
>                 System.out.println(line);
>             }
>         }
>     }
> }
> ```
>
> ### ç¤ºä¾‹2ï¼šä½¿ç”¨å­—èŠ‚æµå†™å…¥æ–‡ä»¶å†…å®¹
>
> ```
> javaå¤åˆ¶ç¼–è¾‘import java.io.*;
> 
> public class WriteFileDemo {
>     public static void main(String[] args) throws IOException {
>         try (FileOutputStream fos = new FileOutputStream("output.bin")) {
>             String data = "Hello, IO!";
>             fos.write(data.getBytes()); // å­—ç¬¦ä¸²è½¬å­—èŠ‚
>         }
>     }
> }
> ```
>
> ------
>
> ## ğŸ§  å››ã€IO æµçš„è®¾è®¡åŸåˆ™
>
> 1. **é¢å‘æŠ½è±¡ï¼ˆæ¥å£/çˆ¶ç±»ï¼‰ç¼–ç¨‹**ï¼šä¾‹å¦‚æ¥å— `InputStream` è€Œéå…·ä½“ç±»ã€‚
> 2. **è£…é¥°è€…æ¨¡å¼ï¼ˆDecoratorï¼‰**ï¼š`BufferedReader` æ˜¯å¯¹ `Reader` çš„åŒ…è£…ã€‚
> 3. **å…³é—­èµ„æºä½¿ç”¨ try-with-resources**ï¼ˆJDK 7+ï¼‰ã€‚
>
> ------
>
> ## âš™ï¸ äº”ã€ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹
>
> | åœºæ™¯                         | æ¨èä½¿ç”¨                                   |
> | ---------------------------- | ------------------------------------------ |
> | è¯»å†™æ–‡æœ¬æ–‡ä»¶                 | `BufferedReader` / `BufferedWriter`        |
> | è¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€è§†é¢‘ï¼‰ | `FileInputStream` / `FileOutputStream`     |
> | å¯¹è±¡æŒä¹…åŒ–                   | `ObjectOutputStream` / `ObjectInputStream` |
> | ç½‘ç»œé€šä¿¡ï¼ˆä½çº§ï¼‰             | `InputStream` / `OutputStream`             |
> | å­—èŠ‚è½¬å­—ç¬¦ï¼ˆå¸¦ç¼–ç ï¼‰         | `InputStreamReader` / `OutputStreamWriter` |
>
> 
>
> ------
>
> ## ğŸ”’ å…­ã€æ³¨æ„äº‹é¡¹
>
> - æ–‡ä»¶è¯»å†™å‰å»ºè®®åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨
> - æµä½¿ç”¨åè¦**å…³é—­**ï¼ˆæˆ–ç”¨ try-with-resources è‡ªåŠ¨å…³é—­ï¼‰
> - å­—ç¬¦æµç¼–ç é—®é¢˜å¯èƒ½ä¼šå¯¼è‡´ä¹±ç ï¼Œæ¨èæ˜¾å¼æŒ‡å®šç¼–ç ï¼Œä¾‹å¦‚ï¼š
>
> ```
> java
> 
> 
> å¤åˆ¶ç¼–è¾‘
> new InputStreamReader(new FileInputStream("file.txt"), "UTF-8");
> ```

## Object

> ##  ä¸€ã€ä»€ä¹ˆæ˜¯ `Object` ç±»ï¼Ÿ
>
> `Object` æ˜¯ Java ä¸­æ‰€æœ‰ç±»çš„**ç›´æ¥æˆ–é—´æ¥çˆ¶ç±»**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š
>
> > **æ¯ä¸€ä¸ªç±»**ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼ç»§æ‰¿å…¶ä»–ç±»ï¼Œ**é»˜è®¤å°±ç»§æ‰¿ `Object`**ã€‚
>
> ```
> javaå¤åˆ¶ç¼–è¾‘public class MyClass {
>     // ç­‰åŒäºï¼špublic class MyClass extends Object
> }
> ```
>
> ------
>
> ## ğŸ“¦ äºŒã€`Object` ç±»ä¸­æœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•ï¼Ÿ
>
> `Object` æä¾›äº†ä¸€ç»„åŸºç¡€æ–¹æ³•ï¼Œæ‰€æœ‰ Java å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨æˆ–é‡å†™ï¼š
>
> | æ–¹æ³•å                                | ä½œç”¨                                            |
> | ------------------------------------- | ----------------------------------------------- |
> | `equals(Object obj)`                  | æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦â€œç›¸ç­‰â€                          |
> | `hashCode()`                          | è¿”å›å¯¹è±¡çš„å“ˆå¸Œç ï¼Œç”¨äºå“ˆå¸Œç»“æ„å¦‚ `HashMap`      |
> | `toString()`                          | è¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤º                            |
> | `getClass()`                          | è·å–è¿è¡Œæ—¶ç±»å¯¹è±¡                                |
> | `clone()`                             | åˆ›å»ºå¹¶è¿”å›å¯¹è±¡å‰¯æœ¬ï¼ˆéœ€è¦å®ç° `Cloneable` æ¥å£ï¼‰ |
> | `finalize()`                          | å¯¹è±¡è¢« GC å›æ”¶å‰è°ƒç”¨ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰              |
> | `wait()` / `notify()` / `notifyAll()` | çº¿ç¨‹é€šä¿¡ç›¸å…³ï¼Œé…åˆ `synchronized` ä½¿ç”¨          |
>
> 
>
> ------
>
> ## ğŸ§  ä¸‰ã€é‡ç‚¹æ–¹æ³•è¯¦è§£
>
> ### 1. `equals(Object obj)`
>
> é»˜è®¤å®ç°æ˜¯â€œ**åœ°å€æ¯”è¾ƒ**â€ï¼Œå¦‚æœä½ æƒ³æ¯”è¾ƒå†…å®¹ï¼Œè¦é‡å†™ï¼š
>
> ```
> javaå¤åˆ¶ç¼–è¾‘@Override
> public boolean equals(Object obj) {
>     if (this == obj) return true;
>     if (obj == null || getClass() != obj.getClass()) return false;
>     MyClass other = (MyClass) obj;
>     return this.id == other.id;
> }
> ```
>
> ### 2. `hashCode()`
>
> é…åˆ `equals()` ä½¿ç”¨ï¼Œå¸¸ç”¨äº `HashMap`, `HashSet` ç­‰ç»“æ„ã€‚
>
> > **è§„åˆ™ï¼š** å¦‚æœä¸¤ä¸ªå¯¹è±¡ `equals()` ç›¸ç­‰ï¼Œåˆ™å®ƒä»¬çš„ `hashCode()` ä¹Ÿå¿…é¡»ç›¸ç­‰ã€‚
>
> ```
> javaå¤åˆ¶ç¼–è¾‘@Override
> public int hashCode() {
>     return Objects.hash(id, name);
> }
> ```
>
> ### 3. `toString()`
>
> é»˜è®¤è¿”å›çš„æ˜¯ç±»å + å“ˆå¸Œç ï¼ˆå¦‚ `MyClass@1a2b3c`ï¼‰ï¼Œé€šå¸¸ä¼šè¢«é‡å†™ç”¨äºæ‰“å°ä¿¡æ¯ï¼š
>
> ```
> javaå¤åˆ¶ç¼–è¾‘@Override
> public String toString() {
>     return "User{id=" + id + ", name='" + name + "'}";
> }
> ```
>
> ### 4. `getClass()`
>
> è¿”å›å½“å‰å¯¹è±¡çš„ `Class` ç±»å‹ï¼š
>
> ```
> javaå¤åˆ¶ç¼–è¾‘Object obj = new String("hello");
> System.out.println(obj.getClass()); // class java.lang.String
> ```
>
> ------
>
> ## ğŸ§ª å››ã€Object ç¤ºä¾‹ä»£ç 
>
> ```
> javaå¤åˆ¶ç¼–è¾‘public class User {
>     int id;
>     String name;
> 
>     public User(int id, String name) {
>         this.id = id;
>         this.name = name;
>     }
> 
>     @Override
>     public boolean equals(Object obj) {
>         if (this == obj) return true;
>         if (!(obj instanceof User)) return false;
>         User other = (User) obj;
>         return this.id == other.id && this.name.equals(other.name);
>     }
> 
>     @Override
>     public int hashCode() {
>         return id + name.hashCode();
>     }
> 
>     @Override
>     public String toString() {
>         return "User{id=" + id + ", name='" + name + "'}";
>     }
> }
> ```
>
> ------
>
> ## ğŸ— äº”ã€`Object` çš„ä½¿ç”¨åœºæ™¯
>
> | åœºæ™¯                   | è¯´æ˜                                     |
> | ---------------------- | ---------------------------------------- |
> | æ³›å‹å®¹å™¨ä¸­å­˜å‚¨ä»»æ„å¯¹è±¡ | å¦‚ `List<Object>`ã€`Map<Object, Object>` |
> | ç±»å‹è½¬æ¢               | ä½¿ç”¨ `instanceof` + å¼ºåˆ¶ç±»å‹è½¬æ¢         |
> | åå°„                   | ä½¿ç”¨ `getClass()`ã€`Class.forName()`     |
> | å¤šæ€                   | æ–¹æ³•å‚æ•°ä¸º `Object` æ—¶å¯æ¥å—ä»»æ„ç±»å‹     |
>
> 
>
> ------
>
> ## â— å…­ã€æ³¨æ„äº‹é¡¹
>
> 1. å¦‚æœä½ è¦ä½¿ç”¨ `HashMap` å­˜å‚¨è‡ªå®šä¹‰ç±»çš„é”®ï¼Œä¸€å®šè¦é‡å†™ `equals()` å’Œ `hashCode()`
> 2. å¦‚æœä½ è¦æ‰“å°å¯¹è±¡ä¿¡æ¯ï¼Œä¸€å®šè¦é‡å†™ `toString()`
> 3. `clone()` æ˜¯æµ…æ‹·è´ï¼Œé€šå¸¸ä¸æ¨èç›´æ¥ç”¨ï¼›å»ºè®®ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æˆ–è‡ªå®šä¹‰ `clone()` æ–¹æ³•
> 4. `finalize()` æ–¹æ³•å·²è¢«åºŸå¼ƒï¼Œä¸æ¨èä½¿ç”¨
>
> ------
>
> ## ğŸ”š æ€»ç»“ä¸€å¥è¯ï¼š
>
> > **`Object` æ˜¯ Java ä¸–ç•Œçš„ç¥–å…ˆï¼ŒæŒæ¡å®ƒçš„å¸¸ç”¨æ–¹æ³•ï¼Œæ˜¯å†™å¥½ç±»å’Œé›†åˆçš„åŸºç¡€ã€‚**



## ğŸšª 1. Servletï¼ˆæœåŠ¡ç«¯ç¨‹åºå…¥å£ï¼‰

### âœ… æ¦‚å¿µï¼š

`Servlet` æ˜¯ **Java Web çš„æ ¸å¿ƒç»„ä»¶**ï¼Œæ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„ Java ç±»ï¼Œç”¨äºæ¥æ”¶å’Œå“åº”æµè§ˆå™¨è¯·æ±‚ã€‚

### ğŸ“¦ ä½œç”¨ï¼š

- æ¥æ”¶è¯·æ±‚ï¼ˆHTTP è¯·æ±‚ï¼‰
- å¤„ç†ä¸šåŠ¡é€»è¾‘
- ç”Ÿæˆå“åº”ï¼ˆHTMLã€JSON ç­‰ï¼‰

### ğŸ§± ç”Ÿå‘½å‘¨æœŸï¼š

ç”±å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰ç®¡ç†ï¼š

1. **åˆå§‹åŒ–**ï¼š`init()`
2. **å¤„ç†è¯·æ±‚**ï¼š`service()` æˆ– `doGet()` / `doPost()`
3. **é”€æ¯**ï¼š`destroy()`

### âœ ç¤ºä¾‹ä»£ç ï¼š

```
javaå¤åˆ¶ç¼–è¾‘@WebServlet("/hello")
public class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
        resp.getWriter().write("Hello, Servlet!");
    }
}
```

------

## ğŸ‘‚ 2. Listenerï¼ˆç›‘å¬å™¨ï¼‰

### âœ… æ¦‚å¿µï¼š

`Listener` æ˜¯ç”¨æ¥**ç›‘å¬ Web åº”ç”¨ä¸­æŸäº›äº‹ä»¶çš„å‘ç”Ÿ**ï¼Œå¦‚åº”ç”¨å¯åŠ¨ã€Session åˆ›å»ºã€å±æ€§å˜åŒ–ç­‰ã€‚

### ğŸ“¦ å¸¸è§ç›‘å¬å™¨ç±»å‹ï¼š

| ç›‘å¬ç±»å‹                 | ä½œç”¨                             |
| ------------------------ | -------------------------------- |
| `ServletContextListener` | ç›‘å¬ Web åº”ç”¨å¯åŠ¨å’Œé”€æ¯          |
| `HttpSessionListener`    | ç›‘å¬ Session åˆ›å»ºä¸é”€æ¯          |
| `ServletRequestListener` | ç›‘å¬è¯·æ±‚åˆ›å»ºä¸é”€æ¯               |
| `xxxAttributeListener`   | ç›‘å¬å±æ€§å˜åŒ–ï¼ˆæ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ï¼‰ |



### âœ ç¤ºä¾‹ä»£ç ï¼ˆåº”ç”¨å¯åŠ¨ç›‘å¬å™¨ï¼‰ï¼š

```
javaå¤åˆ¶ç¼–è¾‘@WebListener
public class AppListener implements ServletContextListener {
    @Override
    public void contextInitialized(ServletContextEvent sce) {
        System.out.println("åº”ç”¨å¯åŠ¨ï¼");
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
        System.out.println("åº”ç”¨å…³é—­ï¼");
    }
}
```

------

## ğŸš§ 3. Filterï¼ˆè¿‡æ»¤å™¨ï¼‰

### âœ… æ¦‚å¿µï¼š

`Filter` æ˜¯ä¸€ç§ç”¨äº **æ‹¦æˆªè¯·æ±‚/å“åº”** çš„ç»„ä»¶ï¼Œåœ¨è¯·æ±‚åˆ°è¾¾ Servlet å‰æˆ–å“åº”è¿”å›æµè§ˆå™¨å‰åšå¤„ç†ã€‚

### ğŸ“¦ ç”¨é€”ï¼š

- ç™»å½•éªŒè¯
- ç¼–ç è®¾ç½®ï¼ˆå¦‚ UTF-8ï¼‰
- è¯·æ±‚æ—¥å¿—
- é˜²æ­¢ SQL æ³¨å…¥/XSS

### âœ ç¤ºä¾‹ä»£ç ï¼š

```
javaå¤åˆ¶ç¼–è¾‘@WebFilter("/*")  // æ‹¦æˆªæ‰€æœ‰è¯·æ±‚
public class MyFilter implements Filter {
    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
                         FilterChain chain) throws IOException, ServletException {
        System.out.println("è¯·æ±‚è¢«è¿‡æ»¤");
        chain.doFilter(request, response); // æ”¾è¡Œ
    }
}
```

------

## ğŸ§² 4. Interceptorï¼ˆæ‹¦æˆªå™¨ï¼ŒSpring MVC æä¾›ï¼‰

### âœ… æ¦‚å¿µï¼š

`Interceptor` æ˜¯ Spring MVC æä¾›çš„ç»„ä»¶ï¼Œä½œç”¨ç±»ä¼¼ Filterï¼Œä½†å®ƒæ˜¯åŸºäº **Spring MVC è°ƒåº¦æœºåˆ¶**ï¼Œèƒ½æ‹¦æˆª Controller æ–¹æ³•æ‰§è¡Œå‰åã€‚

### ğŸ“¦ ç”¨é€”ï¼š

- æƒé™éªŒè¯ï¼ˆå¦‚ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼‰
- æ—¥å¿—è®°å½•ï¼ˆè®°å½• Controller å±‚è®¿é—®ï¼‰
- è¯·æ±‚ç»Ÿè®¡ã€é™æµ
- æ•°æ®å°è£…ï¼ˆå¦‚ç»Ÿä¸€å“åº”ç»“æ„ï¼‰

### ğŸ§± ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼š

| æ–¹æ³•                | è¯´æ˜                                 |
| ------------------- | ------------------------------------ |
| `preHandle()`       | æ§åˆ¶å™¨æ–¹æ³•è°ƒç”¨å‰æ‰§è¡Œï¼Œ**å¯ä¸­æ–­è¯·æ±‚** |
| `postHandle()`      | æ§åˆ¶å™¨æ‰§è¡Œåï¼Œè§†å›¾æ¸²æŸ“å‰             |
| `afterCompletion()` | æ•´ä¸ªè¯·æ±‚å®Œæˆåï¼ˆåŒ…æ‹¬è§†å›¾æ¸²æŸ“ï¼‰       |



### âœ ç¤ºä¾‹ä»£ç ï¼š

```
javaå¤åˆ¶ç¼–è¾‘public class MyInterceptor implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest request,
                             HttpServletResponse response,
                             Object handler) throws Exception {
        System.out.println("å‰ç½®æ‹¦æˆªå™¨é€»è¾‘");
        return true; // è¿”å› false é˜»æ­¢è¯·æ±‚ç»§ç»­
    }
}
```

æ³¨å†Œæ–¹å¼ï¼ˆSpring Bootï¼‰ï¼š

```
javaå¤åˆ¶ç¼–è¾‘@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new MyInterceptor())
                .addPathPatterns("/**");
    }
}
```

------

## ğŸ” å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§         | Servlet      | Listener     | Filter           | Interceptor        |
| ------------ | ------------ | ------------ | ---------------- | ------------------ |
| å±äº         | Java EE åŸç”Ÿ | Java EE åŸç”Ÿ | Java EE åŸç”Ÿ     | Spring MVC         |
| æ‹¦æˆªå¯¹è±¡     | ç›´æ¥å¤„ç†è¯·æ±‚ | ç›‘å¬äº‹ä»¶     | è¯·æ±‚å’Œå“åº”       | æ§åˆ¶å™¨è°ƒç”¨         |
| èƒ½å¦ä¸­æ–­æµç¨‹ | å¦           | å¦           | å¯ä»¥             | å¯ä»¥               |
| é¡ºåºä½ç½®     | æœ€å         | å…¨ç¨‹         | åœ¨ Servlet ä¹‹å‰  | åœ¨ Controller ä¹‹å‰ |
| ç”¨é€”         | è¯·æ±‚å¤„ç†æ ¸å¿ƒ | ç”Ÿå‘½å‘¨æœŸç®¡ç† | ç¼–ç ã€å®‰å…¨ã€æ—¥å¿— | æƒé™ã€æ—¥å¿—ã€é¢„å¤„ç† |



------

## âœ… ä½¿ç”¨å»ºè®®

| åœºæ™¯                                           | ä½¿ç”¨            |
| ---------------------------------------------- | --------------- |
| æƒ³è¦æ‹¦æˆªæ‰€æœ‰è¯·æ±‚æˆ–å“åº”å¹¶ç»Ÿä¸€å¤„ç†ï¼ˆç¼–ç ã€å®‰å…¨ï¼‰ | **Filter**      |
| æƒ³è¦åœ¨ Controller æ–¹æ³•è°ƒç”¨å‰åè¿›è¡Œæ§åˆ¶         | **Interceptor** |
| éœ€è¦å¯¹åº”ç”¨ã€Session ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç›‘å¬           | **Listener**    |
| è‡ªå·±å¤„ç†è¯·æ±‚å’Œå“åº”é€»è¾‘                         | **Servlet**     |